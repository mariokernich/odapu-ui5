<c:FragmentDefinition
    xmlns="sap.m"
    xmlns:c="sap.ui.core"
    xmlns:form="sap.ui.layout.form"
>
    <form:SimpleForm
        editable="true"
        layout="ResponsiveGridLayout"
        labelSpanXL="3"
        labelSpanL="3"
        labelSpanM="3"
    >
        <form:content>
            <VBox visible="{= ${selectedService>/service} !== null }">
                <VBox>
                    <Label
                        text="{i18n>lbl.selectedService} (ODATA {selectedService>/service/ODataType}): "
                    />
                    <Title
                        text="{selectedService>/service/ServicePath}"
                        wrapping="true"
                    />
                </VBox>
            </VBox>
            <VBox visible="{= ${selectedService>/service} === null }">
                <Button
                    text="{i18n>btn.chooseService}"
                    press=".onButtonChooseServicePress"
                    enabled="{= ${global>/AppBusy} === false }"
                    width="100%"
                />
                
                <!-- Recently Used Services -->
                <VBox
                    visible="{= ${recentlyUsedServices>/}.length > 0 }"
                    class="sapUiSmallMarginTop"
                >
                    <HBox
                        justifyContent="SpaceBetween"
                        alignItems="Center"
                        class="sapUiTinyMarginBottom"
                    >
                        <Label
                            text="{i18n>lbl.recentlyUsedServices} ({= ${recentlyUsedServices>/}.length })"
                        />
                        <Button
                            text="{i18n>btn.clearAllRecentlyUsed}"
                            type="Transparent"
                            press=".onButtonClearAllRecentlyUsedPress"
                            tooltip="{i18n>msg.confirmClearAllRecentlyUsed}"
                        />
                    </HBox>
                    <VBox
                        items="{
                            path: 'recentlyUsedServices>/',
                            templateShareable: false
                        }"
                    >
                        <HBox
                            justifyContent="SpaceBetween"
                            alignItems="Center"
                            class="sapUiTinyMarginBottom"
                        >
                            <Button
                                text="{recentlyUsedServices>ServiceName}"
                                tooltip="ODATA {recentlyUsedServices>ODataType} - {recentlyUsedServices>ServicePath}"
                                press=".onServiceNameButtonPress"
                                type="Transparent"
                                icon="sap-icon://history"
                                class="sapUiTinyMarginEnd"
                            />
                            <Button
                                icon="sap-icon://delete"
                                type="Transparent"
                                press=".onButtonDeleteRecentlyUsedPress"
                                tooltip="{i18n>btn.deleteRecentlyUsed}"
                            />
                        </HBox>
                    </VBox>
                </VBox>
            </VBox>
            <HBox
                visible="{= ${selectedService>/service} !== null }"
                alignItems="Center"
                fitContainer="true"
                justifyContent="SpaceBetween"
                renderType="Bare"
            >
                <Button
                    text="{i18n>btn.changeService}"
                    press=".onButtonChangeServicePress"
                    width="100%"
                    class="sapUiTinyMarginEnd"
                />
                <Button
                    text="{i18n>btn.showMetadata}"
                    width="100%"
                    class="sapUiTinyMarginBegin"
                    press=".onButtonShowMetadataPress"
                />
            </HBox>
        </form:content>
    </form:SimpleForm>
</c:FragmentDefinition>
