<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core">
    <Dialog
        title="{i18n>dlg.title.savedProjects} ({= ${dialog>/projects}.length })"
        contentWidth="400px"
        contentHeight="600px"
        draggable="true"
        initialFocus="idProjectSearchField">
        <content>
            <Toolbar>
                <SearchField
                    placeholder="{i18n>ph.searchProjects}..."
                    liveChange="onSearch"
                    width="100%" 
                    id="idProjectSearchField" />
                <ToolbarSpacer />
            </Toolbar>
            <List
                id="idProjectsList"
                items="{dialog>/projects}"
                mode="SingleSelectMaster"
                growing="true"
                growingThreshold="100"
                noDataText="{i18n>msg.noProjectsFound}"
                showNoData="true">
                <CustomListItem>
                    <HBox alignItems="Center" justifyContent="SpaceBetween" class="sapUiTinyMargin">
                        <VBox class="sapUiTinyMarginEnd">
                            <Title
                                text="{dialog>ProjectName}"
                                titleStyle="H6"
                            />
                            <HBox alignItems="Center" renderType="Bare">
                                <Text
                                    text="{dialog>ServiceName}"
                                    class="sapUiTinyMarginEnd"
                                />
                            </HBox>
                        </VBox>
                        <HBox alignItems="Center" justifyContent="End" renderType="Bare">
                            <ObjectStatus
                                text="ODATA V{dialog>Odatatype}"
                                state="Information"
                                class="sapUiTinyMarginEnd"
                            />
                            <Button
                                icon="sap-icon://delete"
                                type="Transparent"
                                press="onDelete"
                                tooltip="{i18n>btn.deleteRecentlyUsed}"
                            >
                                <customData>
                                    <core:CustomData key="project" value="{dialog>}" />
                                </customData>
                            </Button>
                        </HBox>
                    </HBox>
                </CustomListItem>
            </List>
        </content>
        <buttons>
            <Button
                text="{i18n>btn.load}"
                type="Emphasized"
                icon="sap-icon://accept"
                press="onLoad" />
            <Button
                text="{i18n>btn.cancel}"
                type="Ghost"
                icon="sap-icon://decline"
                press="onCancel" />
        </buttons>
    </Dialog>
</core:FragmentDefinition> 