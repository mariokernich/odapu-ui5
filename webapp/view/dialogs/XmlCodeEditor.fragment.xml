<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:codeeditor="sap.ui.codeeditor"
    xmlns:layout="sap.ui.layout"
    xmlns:odpu="de.kernich.odpu.control"
    xmlns:cssgrid="sap.ui.layout.cssgrid"
>
    <Dialog
        title="{i18n>dlg.title.metadata}"
        contentHeight="100%"
        contentWidth="100%"
        busyIndicatorDelay="0"
    >
        <customHeader>
            <OverflowToolbar>
                <Title text="{i18n>dlg.title.metadata}" />
                <ToolbarSpacer />
                <SegmentedButton
                    width="250px"
                    selectedKey="{dialog>/viewMode}"
                >
                    <items>
                        <SegmentedButtonItem
                            text="{i18n>btn.code}"
                            key="xml"
                            icon="sap-icon://attachment-html"
                        />
                        <SegmentedButtonItem
                            text="{i18n>btn.preview}"
                            key="entity"
                            press="onEntityPreview"
                            icon="sap-icon://document-text"
                        />
                    </items>
                </SegmentedButton>
            </OverflowToolbar>
        </customHeader>
        <content>
            <Page showHeader="false">
                <codeeditor:CodeEditor
                    editable="false"
                    type="xml"
                    value="{dialog>/xml}"
                    syntaxHints="false"
                    visible="{= ${dialog>/viewMode} === 'xml'}"
                />
                <IconTabBar
                    selectedKey="{dialog>/selectedType}"
                    expandable="false"
                    visible="{= ${dialog>/viewMode} === 'entity'}"
                    upperCase="true"
                    headerMode="Inline"
                >
                    <items>
                        <IconTabFilter
                            text="EntitÃ¤ten ({= ${dialog>/entities}.length })"
                            key="entities"
                            icon="sap-icon://database"
                        >
                            <content>
                                <cssgrid:CSSGrid
                                    items="{path: 'dialog>/entities'}"
                                    gridTemplateColumns="1fr 1fr 1fr 1fr"
                                    gridGap="20px"
                                >
                                    <odpu:EntityPreview entity="{dialog>}" />
                                </cssgrid:CSSGrid>
                            </content>
                        </IconTabFilter>

                        <IconTabFilter
                            text="Function Imports ({= ${dialog>/functions}.length })"
                            key="functions"
                            icon="sap-icon://syntax"
                        >
                            <content>
                                <cssgrid:CSSGrid
                                    items="{path: 'dialog>/functions'}"
                                    gridTemplateColumns="1fr 1fr 1fr 1fr"
                                    gridGap="20px"
                                >
                                    <odpu:FunctionImportPreview
                                        function="{dialog>}"
                                    />
                                </cssgrid:CSSGrid>
                            </content>
                        </IconTabFilter>

                        <IconTabFilter
                            text="Actions ({= ${dialog>/actions}.length })"
                            key="actions"
                            icon="sap-icon://play"
                        >
                            <content>
                                <cssgrid:CSSGrid
                                    items="{path: 'dialog>/actions'}"
                                    gridTemplateColumns="1fr 1fr 1fr 1fr"
                                    gridGap="20px"
                                >
                                    <odpu:ActionPreview action="{dialog>}" />
                                </cssgrid:CSSGrid>
                            </content>
                        </IconTabFilter>

                        <IconTabFilter
                            text="Complex Types ({= ${dialog>/complexTypes}.length })"
                            key="complexTypes"
                            icon="sap-icon://puzzle"
                        >
                            <content>
                                <cssgrid:CSSGrid
                                    items="{path: 'dialog>/complexTypes'}"
                                    gridTemplateColumns="1fr 1fr 1fr 1fr"
                                    gridGap="20px"
                                >
                                    <odpu:ComplexTypePreview
                                        complexType="{dialog>}"
                                    />
                                </cssgrid:CSSGrid>
                            </content>
                        </IconTabFilter>
                    </items>
                </IconTabBar>
            </Page>
        </content>
        <buttons>
            <Button
                text="{i18n>btn.download}"
                icon="sap-icon://download"
                press="onDownload"
            />
            <Button
                text="{i18n>btn.copy}"
                icon="sap-icon://copy"
                press="onCopy"
            />
            <Button
                text="{i18n>btn.close}"
                icon="sap-icon://decline"
                press=".onCancel"
            />
        </buttons>
    </Dialog>
</core:FragmentDefinition>
