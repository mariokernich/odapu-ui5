<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:codeeditor="sap.ui.codeeditor"
    xmlns:odpu="de.kernich.odpu.control"
>
    <Dialog
        title="{i18n>dlg.title.metadata}"
        contentHeight="100%"
        contentWidth="100%"
        busyIndicatorDelay="0"
    >
        <content>
            <SegmentedButton
                width="100%"
                selectedKey="{dialog>/viewMode}"
            >
                <items>
                    <SegmentedButtonItem
                        text="Code"
                        key="xml"
                    />
                    <SegmentedButtonItem
                        text="Preview"
                        key="mermaid"
                        press="onMermaid"
                    />
                </items>
            </SegmentedButton>
            <VBox visible="{= ${dialog>/viewMode} === 'xml'}">
                <codeeditor:CodeEditor
                    editable="false"
                    type="xml"
                    value="{dialog>/xml}"
                    syntaxHints="false"
                    maxLines="1000"
                />
            </VBox>
            <VBox visible="{= ${dialog>/viewMode} === 'mermaid'}">
                <odpu:Mermaid />
            </VBox>
        </content>
        <buttons>
            <Button
                text="{i18n>btn.download}"
                icon="sap-icon://download"
                press="onDownload"
            />
            <Button
                text="{i18n>btn.copy}"
                icon="sap-icon://copy"
                press="onCopy"
            />
            <Button
                text="{i18n>btn.close}"
                icon="sap-icon://decline"
                press=".onCancel"
            />
        </buttons>
    </Dialog>
</core:FragmentDefinition>
